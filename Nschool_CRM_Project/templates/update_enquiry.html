{% extends 'base.html' %}

{% load static %}
{% load bootstrap_icons %}
{% load custom_filters %}


{% block title %}User Module{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static '/css/new_user.css' %}">
<link rel="stylesheet" href="{% static '/css/header.css' %}">
<link rel="stylesheet" href="{% static '/css/new_enquiry.css' %}">
<link rel="stylesheet" href="{% static '/css/update_enquiry.css' %}">
{% endblock %}

{% block header %}
{% include 'header.html' %}
{% endblock %}

{% block content %}
<!-- <div class="container-fluid"> -->
<div class="row m-0 p-0">
    {% include 'side_navbar.html' %}

    <div class="col-12 col-lg-10 background-div">

        <div class="row m-0 p-0">
            <div class="col border bg-white rounded mt-4 ms-xll-4 mb-2 px-xll-4">
                <nav style="--bs-breadcrumb-divider: '|';" aria-label="breadcrumb">
                    <ol class="breadcrumb pt-3 mb-3 ps-lg-3">
                        <li class="breadcrumb-item"><a class="user-a" href="#">Enquiry</a></li>
                        <li class="breadcrumb-item active" aria-current="page">New Enquiry</li>
                    </ol>
                </nav>
            </div>
        </div>

        
        <div class="row m-0 p-0">
            <div class="col border-end bg-white rounded ms-xll-4 mb-2 p-0">
                <!-- Tab Navigation -->
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Student Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Education Details</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes" type="button" role="tab" aria-controls="notes" aria-selected="false">Notes</button>
                    </li>
                </ul>
            </div>
        </div>
        

        <div class="row m-0 p-0">
            <div class="col border bg-white rounded mt-2 ms-xll-4 mb-2 px-xll-4">

                <!-- Tab Content -->
                <form id="enquiry_form"  enctype="multipart/form-data" class="pe-lg-2" action="" method="post">
                    <!-- Student details -->
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <div class="row m-0 p-0">
                                    {% csrf_token %}
                                    <div class="col-12 mt-4 ms-md-2 position-relative">
                                        <h5 class="fw-bold st-details">Student Details</h5>
                                        <p class="user-para">Use the below form to update your profile</p>
                                        <span class="message" id="message">
                                            {% for message in messages %}
                                            <div>
                                                {{ message }}
                                            </div>
                                        {% endfor %}
                                        </span>
                                    </div>

                                    <!-- date field -->
                                    <div class="row d-flex justify-content-between pe-0">
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp mx-md-2">
                                                <input type="date" name="enquiry_date" id="enquiry_date" value="{{enquiry.enquiry_date|date:'Y-m-d' }}" class="form-control"
                                                    aria-label="date" placeholder=" " autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Date <span class="required">*</span> &nbsp;</label>
                                                <span id="date_error" class="error-div">
                                                    {% if enquiry_date %}
                                                        {{enquiry_date}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <!-- enquiry number field -->
                                        <div class="col-12 col-md-6 p-0">
                                            <div class="user-input-wrp ms-4">
                                                <input type="text" name="enquiry_number" id="enquiry_number" value="{{enquiry.enquiry_no}}" class="form-control"
                                                    aria-label="text" placeholder=" " autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Enquiry No&nbsp;</label>
                                                <span id="enquiry_no_error" class="error-div">
                                                    <!-- {% if enquiry_no %}
                                                        {{enquiry_no}}
                                                    {% endif %} -->
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <!-- student name field -->
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp mx-md-2">
                                                <input type="text" name="student_name" id="student_name" value="{{enquiry.name}}" class="form-control"
                                                    aria-label="student_name" placeholder=" " autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Name <span class="required">*</span> &nbsp;</label>
                                                <span id="user_error" class="error-div">
                                                    <!-- {% if name %}
                                                        {{name}}
                                                    {% endif %} -->
                                                </span>
                                            </div>
                                        </div>
            
                                        <!-- student contact number field -->
                                        <div class="col-12 col-md-6 p-0">
                                            <div class="user-input-wrp ms-4">
                                                <input type="text" name="contact" id="contact" maxlength="10" value="{{enquiry.contact_no}}" class="form-control"
                                                    aria-label="contact" placeholder=" " autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Contact No <span class="required">*</span> &nbsp;</label>
                                                <span id="contact_error" class="error-div">
                                                    {% if contact_no %}
                                                        {{contact_no}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
            
                                        <!-- student email field -->
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp mx-md-2">
                                                <input type="email" name="email" id="email" value="{{enquiry.email_id}}" class="form-control" placeholder=" "
                                                    autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;E-Mail-ID <span class="required">*</span> &nbsp;</label>
                                                <span id="email_error" class="error-div error-right">
                                                    {% if email_id %}
                                                        {{email_id}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <!-- student date of birth field -->
                                        <div class="col-12 col-md-6 p-0">
                                            <div class="user-input-wrp ms-4">
                                                <input type="date" name="dob" id="dob" value="{{ enquiry.date_of_birth|date:'Y-m-d' }}" class="form-control" placeholder=" "
                                                    autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Date Of Birth&nbsp;</label>
                                                <span id="dob_error" class="error-div error-right">
                                                    {% if date_of_birth %}
                                                        {{date_of_birth}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- student father name / guardian field -->
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp mx-md-2">
                                                <input type="text" name="father_name" id="father_name" value="{{enquiry.father_name}}" class="form-control" placeholder=" "
                                                    autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Father's Name / Guardian's Name&nbsp;</label>
                                                <span id="father_name_error" class="error-div error-right">
                                                    {% if fathers_name %}
                                                        {{fathers_name}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Father's Contact No field -->
                                        <div class="col-12 col-md-6 p-0">
                                            <div class="user-input-wrp ms-4">
                                                <input type="text" name="father_contact" id="father_contact" value="{{enquiry.fathers_contact_no}}" maxlength="10" maxlength="10" class="form-control" placeholder=" "
                                                    autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Father's Contact No <span class="required">*</span> &nbsp;</label>
                                                <span id="father_contact_error" class="error-div error-right">
                                                    {% if fathers_contact_no %}
                                                        {{fathers_contact_no}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>


                                        <div class="row">
                                            <div class="col-6 pe-0">
                                                <!-- Father's Occupation field -->
                                                <div class="col-12 col-md-12 pe-md-0">
                                                    <div class="user-input-wrp mx-md-2">
                                                        <input type="text" name="fathers_occupation" id="fathers_occupation" value="{{enquiry.fathers_occupation}}" class="form-control" placeholder=" "
                                                            autocomplete="off" autofocus>
                                                        <label class="floating-label">&nbsp;Father's Occupation&nbsp;</label>
                                                        <span id="father_occupation_error" class="error-div error-right">
                                                            {% if fathers_occupation %}
                                                                {{fathers_occupation}}
                                                            {% endif %}
                                                        </span>
                                                    </div>
                                                </div>

                                                <!-- Course Name field -->
                                                <div class="col-12 col-md-12 pe-md-0">
                                                    <div class="user-input-wrp mx-md-2 my-md-5">
                                                        <select class="form-select select" id="courseName" value="{{enquiry.course_name}}" name="course_name" onchange="handleCourseNameChange()">
                                                            <option value="" selected>Select Your Course</option>
                                                            {% for course in courses %}
                                                                <option value="{{ course.id }}">{{ course.course_name }}</option>
                                                            {% endfor %}
                                                        </select>
                                                        <label for="courseName" class="floating-label float">&nbsp;Course Name <span class="required">*</span> &nbsp;</label>
                                                        <span id="course_name_error" class="error-div error-right">
                                                            {% if course_name %}
                                                                {{course_name}}
                                                            {% endif %}
                                                        </span>
                                                    </div>
                                                </div>

                                                <!-- Inplant Technology field -->
                                                <div class="col-12 col-md-12 pe-md-0" style="display: none;" id="technology_div">
                                                    <div class="user-input-wrp mx-md-2 mt-md-5">
                                                        <input type="text" name="technology" id="technology" value="{{inplant_technology}}" class="form-control" placeholder=" "
                                                            autocomplete="off">
                                                        <label class="floating-label">&nbsp;Technology <span class="required">*</span> &nbsp;</label>
                                                        <span id="technology_error" class="error-div error-right">
                                                            {% if errors.inplant_technology %}
                                                                {{errors.inplant_technology}}
                                                            {% endif %}
                                                        </span>
                                                    </div>
                                                </div>
                                                
                                                <!-- Internship Technology field -->
                                                <div class="col-12 col-md-12 pe-md-0" style="display: none;" id="internship_technology_div">
                                                    <div class="user-input-wrp mx-md-2 mt-md-5">
                                                        <input type="text" name="internship_technology" id="internship_technology" value="{{internship_technology}}" class="form-control" placeholder=" "
                                                            autocomplete="off" autofocus>
                                                        <label class="floating-label">&nbsp;Technology <span class="required">*</span> &nbsp;</label>
                                                        <span id="internship_technology_error" class="error-div error-right">
                                                            {% if errors.internship_technology %}
                                                                {{errors.internship_technology}}
                                                            {% endif %}
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <!-- No.of Days field -->
                                                    <div class="col-12 col-md-6 pe-md-0"  style="display: none;" id="no_of_days_div">
                                                        <div class="user-input-wrp mx-md-2">
                                                            <input type="text" name="inplant_no_of_days" id="inplant_no_of_days" value="{{inplant_no_of_days}}" class="form-control" placeholder=" "
                                                                autocomplete="off" autofocus>
                                                            <label class="floating-label">&nbsp;No.of Days <span class="required">*</span> &nbsp;</label>
                                                            <span id="inplant_no_of_days_error" class="error-div error-right">
                                                                {% if errors.inplant_no_of_days %}
                                                                    {{errors.inplant_no_of_days}}
                                                                {% endif %}
                                                            </span>
                                                        </div>
                                                    </div>

                                                    <!-- No.of Students -->
                                                    <div class="col-12 col-md-6" style="display: none;" id="no_of_students_div">
                                                        <div class="user-input-wrp me-md-2">
                                                            <input type="text" name="inplant_no_of_students" id="inplant_no_of_students" value="{{inplant_no_of_students}}" class="form-control" placeholder=" "
                                                                autocomplete="off" autofocus>
                                                            <label class="floating-label">&nbsp;No.of Students <span class="required">*</span> &nbsp;</label>
                                                            <span id="inplant_no_of_students_error" class="error-div error-right">
                                                                {% if errors.inplant_no_of_students %}
                                                                    {{errors.inplant_no_of_students}}
                                                                {% endif %}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <!-- No.of Days field -->
                                                    <div class="col-12 col-md-6 pe-md-0"  style="display: none;" id="internship_no_of_days_div">
                                                        <div class="user-input-wrp mx-md-2">
                                                            <input type="text" name="internship_no_of_days" id="internship_no_of_days" value="{{inplant_no_of_days}}" class="form-control" placeholder=" "
                                                                autocomplete="off" autofocus>
                                                            <label class="floating-label">&nbsp;No.of Days <span class="required">*</span> &nbsp;</label>
                                                            <span id="internship_no_of_days_error" class="error-div error-right">
                                                                {% if errors.internship_no_of_days %}
                                                                    {{errors.internship_no_of_days}}
                                                                {% endif %}
                                                            </span>
                                                        </div>
                                                    </div>

                                                    <!-- No.of Students -->
                                                    <div class="col-12 col-md-6" style="display: none;" id="internship_no_of_students_div">
                                                        <div class="user-input-wrp me-md-2">
                                                            <input type="text" name="internship_no_of_students" id="internship_no_of_students" value="{{inplant_no_of_students}}" class="form-control" placeholder=" "
                                                                autocomplete="off" autofocus>
                                                            <label class="floating-label">&nbsp;No.of Students <span class="required">*</span> &nbsp;</label>
                                                            <span id="internship_no_of_students_error" class="error-div error-right">
                                                                {% if errors.internship_no_of_students %}
                                                                    {{errors.internship_no_of_students}}
                                                                {% endif %}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                

                                            </div>
                                            <div class="col-6 p-0">
                                                <!-- Address field -->
                                                <div class="col-12 col-md-12 ms-md-4">
                                                    <div class="user-input-wrp ms-md-3">
                                                        <textarea name="address" id="address" value="{{enquiry.address}}" class="form-control text-area" rows="9" cols="1" placeholder=" "
                                                            autocomplete="off" autofocus>
                                                        </textarea>
                                                        <label class="floating-label">&nbsp;Address&nbsp;</label>
                                                        <span id="father_occupation_error" class="error-div error-right">
                                                            {% if address %}
                                                                {{address}}
                                                            {% endif %}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
            
                                    <div class="row d-flex justify-content-between">
                                        <div class="col-6 d-flex justify-content-md-end p-0 pe-4 pe-lg-4">
                                        </div>
                                        <div class="col-6 d-flex justify-content-lg-end ps-lg-4 p-0 ps-4 gap-5">
                                            <button class="btn login-btn" id="next-tab">Next</button>
                                            <!-- <input type="submit" value="submit" class="btn login-btn"> -->
                                        </div>
                                    </div>

                                    
                                
                                <span>
                                    {% if error_messages %}
                                    <div class="errors-common">
                                        <ul class="ul-errors">
                                            {% for field, message in error_messages.items %}
                                                {% if message %}
                                                    <li>{{ message }}</li>
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    {% endif %}
                                </span>
                            </div>
                        </div>

                        <!-- Education details -->
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            <div class="col-12 mt-4 ms-md-3 position-relative">
                                <h5 class="fw-bold st-details">Education Details</h5>
                                <p class="user-para">Use the below form to update your profile</p>
                                <!-- <span class="message" id="message">{{message}}</span> -->
                            </div>

                            <div class="row">
                                <div class="col">
                                    <!-- degree field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp mx-md-3">
                                            <input type="text" name="degree" id="degree" value="{{enquiry.degree}}" class="form-control"
                                                aria-label="degree" placeholder=" " autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Degree <span class="required">*</span> &nbsp;</label>
                                            <span id="degree_error" class="error-div">
                                                {% if degree %}
                                                    {{degree}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- grade-persentage field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp mx-md-3 mt-md-5">
                                            <input type="text" name="grade_persentage" id="grade_persentage" value="{{enquiry.grade_percentage}}" class="form-control"
                                                aria-label="collage" placeholder=" " autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Grade-Persentage&nbsp;</label>
                                            <span id="grade_persentage_error" class="error-div">
                                                {% if grade_percentage %}
                                                    {{grade_percentage}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <!-- collage field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp me-md-4">
                                            <input type="text" name="college" id="college" value="{{enquiry.college}}" class="form-control"
                                                aria-label="college" placeholder=" " autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Collage <span class="required">*</span> &nbsp;</label>
                                            <span id="college_error" class="error-div">
                                                {% if college %}
                                                    {{college}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Year Of Graduation field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp me-md-4 mt-md-5">
                                            <input type="text" name="year_of_graduation" id="year_of_graduation" value="{{enquiry.year_of_graduation}}" class="form-control"
                                                aria-label="collage" placeholder=" " autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Year Of Graduation <span class="required">*</span> &nbsp;</label>
                                            <span id="year_of_graduation_error" class="error-div">
                                                {% if year_of_graduation %}
                                                    {{year_of_graduation}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Mode of Enquiry -->
                        
                            <div class="col-12 mt-4 ms-md-3 position-relative">
                                <h5 class="fw-bold st-details">Mode of Enquiry</h5>
                                <p class="user-para">Use the below form to update your profile</p>
                                <!-- <span class="message" id="message">{{message}}</span> -->
                            </div>

                            <div class="row">
                                <div class="col">

                                    <!-- Mode of Enquiry field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp mx-md-3 mb-md-5">
                                            <select name="mode_of_enquiry" id="mode_of_enquiry" class="form-select select" onchange="handleModeOfEnquiryChange()">
                                                <option value="" selected>Select Mode of Enquiry</option>
                                                {% for mode in mode_of_enquiry_choices %}
                                                    <option value="{{ mode.id }}" {% if mode.id == mode_of_enquiry %}selected{% endif %}>{{ mode.mode_of_enquiry }}</option>
                                                {% endfor %}
                                            </select>
                                            <label class="floating-label">&nbsp;Mode of Enquiry <span class="required">*</span> &nbsp;</label>
                                            <span id="mode_of_enquiry_error" class="error-div">
                                                {% if errors.mode_of_enquiry %}
                                                        {{errors.mode_of_enquiry}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Refferenc Name -->
                                    <div class="col-12 col-md-12" style="display: none;" id="reference_name_div">
                                        <div class="user-input-wrp mx-md-3 mb-md-5">
                                            <input type="text" name="reference_name" value="{{reference_name}}" id="reference_name" class="form-control"
                                                aria-label="collage" placeholder=" " autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Refference Name <span class="required">*</span> &nbsp;</label>
                                            <span id="reference_name_error" class="error-div">
                                                {% if errors.reference_name %}
                                                        {{errors.reference_name}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Father's Contact No field -->
                                    <div class="col-12 col-md-12" style="display: none;" id="reference_contact_div">
                                        <div class="user-input-wrp mx-md-3 mb-md-5">
                                            <input type="text" name="reference_contact" value="{{reference_contact_no}}" id="reference_contact" maxlength="10" class="form-control" placeholder=" "
                                                autocomplete="off" autofocus>
                                            <label class="floating-label">&nbsp;Contact No <span class="required">*</span> &nbsp;</label>
                                            <span id="reference_contact_error" class="error-div error-right">
                                                {% if errors.reference_contact_no %}
                                                        {{errors.reference_contact_no}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Others field -->
                                    <div class="col-12 col-md-12" style="display: none;" id="other_enquiry_details_div">
                                        <div class="user-input-wrp mx-md-3 mb-md-5">
                                            <input type="text" name="other_enquiry_details" value="{{other_enquiry_details}}" id="other_enquiry_details" class="form-control"
                                                aria-label="collage" placeholder=" " autocomplete="off" autofocus>
                                            <!-- <label class="floating-label">&nbsp;Refference Name&nbsp;</label> -->
                                            <span id="other_enquiry_details_error" class="error-div">
                                                {% if errors.other_enquiry_details %}
                                                        {{errors.other_enquiry_details}}
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>

                                </div>
                                <div class="col">
                                    <!-- Status Field -->
                                    <div class="col-12 col-md-12" style="display: none;">
                                        <div class="user-input-wrp ms-md-0 me-md-4 mb-md-5">
                                            <textarea name="address" id="address" class="form-control text-area" rows="5" cols="1" placeholder=" " autocomplete="off" autofocus>
                                        
                                            </textarea>
                                            <label class="floating-label">&nbsp;Status&nbsp;</label>
                                            <span id="degree_error" class="error-div">
                                                
                                            </span>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <!-- Next Follow-Up Date field -->
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp">
                                                <input type="date" name="next_follow_up_date" id="next_follow_up_date" value="{{enquiry.next_follow_up_date|date:'Y-m-d'}}" class="form-control"
                                                    aria-label="date" placeholder=" " autocomplete="off" autofocus>
                                                <label class="floating-label">&nbsp;Next Follow-Up Date <span class="required">*</span> &nbsp;</label>
                                                <span id="next_follow_up_date_error" class="error-div">
                                                    {% if errors.next_follow_up_date %}
                                                        {{errors.next_follow_up_date}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Mode of Enquiry field -->
                                        <div class="col-12 col-md-6">
                                            <div class="user-input-wrp me-md-4 mb-md-5">
                                                <select name="lead_type" id="lead_type" class="form-select select" onchange="handleModeOfEnquiryChange()">
                                                    <option value="" selected>Select</option>
                                                    <option value="Netural">Netural</option>
                                                    <option value="Positive">Positive</option>
                                                    <option value="Dead">Dead</option>
                                        
                                                </select>
                                                <label class="floating-label">&nbsp;Lead Type <span class="required">*</span> &nbsp;</label>
                                                <span id="lead_type_error" class="error-div">
                                                    {% if errors.lead_type %}
                                                            {{errors.lead_type}}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row d-flex justify-content-between">
                                    <div class="col-6 d-flex justify-content-md-end p-0 pe-4 pe-lg-4">
                                    </div>
                                    <div class="col-6 d-flex justify-content-lg-end ps-lg-4 p-0 ps-4 gap-5">
                                        <button class="btn login-btn nav-link active " id="student-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Next</button>
                                        <!-- <input type="submit" value="submit" class="btn login-btn"> -->
                                    </div>
                                </div>

                            </div>

                        </div>
                    
                        <div class="tab-pane fade" id="notes" role="tabpanel" aria-labelledby="notes-tab">
                            <div class="row m-0 p-0">
                                    <div class="col-12 mt-4 ms-md-2 position-relative">
                                        <h5 class="fw-bold st-details">Notes</h5>
                                        <span class="message" id="message">
                                            {% for message in messages %}
                                            <div>
                                                {{ message }}
                                            </div>
                                            {% endfor %}
    
                                        </span>
                                        <span id="notes_error" class="error-div notes-error-div">
                                            
                                        </span>
                                    </div>

                                    <!-- Note field -->
                                    <div class="col-12 col-md-12">
                                        <div class="user-input-wrp me-md-4 mt-md-5">
                                            <div class="notes">
                                                <!-- <form id="notes_form" class="pe-lg-2" action="" method="post"> -->
                                                    <textarea name="notes" id="notes" class="form-control text-area text-notes" rows="5" cols="40" placeholder="Add input" autocomplete="off" autofocus>
                                                        
                                                    </textarea>
                                                    <!-- <label class="floating-label">&nbsp;Add input&nbsp;</label> -->
                                                    <div class="d-flex container">
                                                        <div class="col-6 fileUploadInput">
                                                            <button>
                                                                <?xml version="1.0" ?><svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><path d="M12.4797 4.15793C14.6095 0.833113 19.0267 -0.132589 22.3457 2.00098C25.6648 4.13454 26.6288 8.55944 24.4989 11.8843L22.6498 10.6956C24.1243 8.39379 23.4569 5.3304 21.1591 3.85332C18.8614 2.37624 15.8033 3.0448 14.3288 5.3466L12.4797 4.15793Z" fill="black"/><path d="M14.3278 5.34752L5.1311 19.7042C4.14959 21.2384 4.5946 23.2789 6.12591 24.263C7.65789 25.2475 9.69685 24.8018 10.68 23.2674L13.0534 19.5629L13.0519 19.5619L18.9849 10.3002L18.9863 10.3012C19.4777 9.53391 19.2553 8.51284 18.4894 8.0205C17.7234 7.52814 16.7041 7.751 16.2126 8.51826L16.2111 8.51733L11.5 16.001C11.2118 16.4509 10.6138 16.5814 10.1643 16.2925L9.94284 16.1501C9.49339 15.8612 9.36268 15.2622 9.65088 14.8123L14.3621 7.32857L14.3635 7.3295C15.5104 5.53929 17.8888 5.01934 19.676 6.16816C21.4631 7.317 21.9822 9.69964 20.8354 11.4899L20.8339 11.489L18.4613 15.1927L18.4632 15.1939L12.5297 24.4564C10.891 27.0135 7.49232 27.756 4.93909 26.1152C2.38578 24.4743 1.64432 21.071 3.28299 18.5136L12.4787 4.15885L14.3278 5.34752Z" fill="black"/><path d="M15.4516 23.7222C15.0022 23.4333 14.8715 22.8343 15.1597 22.3844L22.6473 10.6957L24.4965 11.8844L17.0088 23.5731C16.7206 24.023 16.1226 24.1535 15.6731 23.8646L15.4516 23.7222Z" fill="black"/></svg>
                                                            </button>
                                                            <!-- <span class="slash-span">|</span> -->
                                                            <input type="file" id="files" name="files" />
                                                        </div>
                                                        <div class="col-6 d-flex justify-content-lg-end ps-lg-4 p-0 pe-4 gap-5">
                                                            <button type="reset" class="btn login-btn nav-link active " id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes" type="button" role="tab" aria-controls="notes" aria-selected="true">Cancel</button>
                                                            <input type="submit" value="save" class="btn login-btn w-25">
                                                        </div>
                                                    </div>
                                                <!-- </form> -->
                                                <!-- <span id="notes_error" class="error-div">
                                                    
                                                </span> -->
                                            </div>
                                            <!-- {% if enquiry.notes %}
                                            <div class="row mt-5">
                                                <div class="col-8">
                                                    <input type="text" name="" id="" value="{{enquiry.notes}}" readonly>
                                                </div>
                                                <div class="col-2">
                                                    <input type="text" value="{{enquiry.created_at}}" readonly>
                                                </div>
                                                <div class="col-2">
                                                    <div>
                                                        <a href="/update_enquiry/{{user.id}}">
                                                            <span class="edit">
                                                                <?xml version="1.0" ?><svg class="edit-icon action-div" id="Outlined" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title/><g id="Fill"><path d="M29.12,6.05,26,2.88a3,3,0,0,0-4.24,0L6.29,18.29a3.06,3.06,0,0,0-.72,1.18L2.08,29.92l10.46-3.49a3.15,3.15,0,0,0,1.17-.72L29.12,10.29a3,3,0,0,0,0-4.24Zm-21,13.28,8.75-8.74,1.58,1.58L9.67,20.92ZM18.24,9.17l1.59-1.58,4.58,4.58-1.58,1.59ZM7.1,21.19l3.72,3.71L5.25,26.75Zm5.57,2.73-1.59-1.59,8.75-8.74,1.58,1.58Zm15-15-1.88,1.88L21.24,6.17l1.88-1.88A1,1,0,0,1,23.83,4a1,1,0,0,1,.71.29l3.17,3.18a1,1,0,0,1,.29.7A1,1,0,0,1,27.71,8.88Z"/></g></svg>
                                                            </span>
                                                        </a>
                                                        <a href="/delete_enquiry/{{user.id}}">
                                                            <span class="delete">
                                                                <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg class="delete-icon action-div" height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M400,113.3h-80v-20c0-16.2-13.1-29.3-29.3-29.3h-69.5C205.1,64,192,77.1,192,93.3v20h-80V128h21.1l23.6,290.7   c0,16.2,13.1,29.3,29.3,29.3h141c16.2,0,29.3-13.1,29.3-29.3L379.6,128H400V113.3z M206.6,93.3c0-8.1,6.6-14.7,14.6-14.7h69.5   c8.1,0,14.6,6.6,14.6,14.7v20h-98.7V93.3z M341.6,417.9l0,0.4v0.4c0,8.1-6.6,14.7-14.6,14.7H186c-8.1,0-14.6-6.6-14.6-14.7v-0.4   l0-0.4L147.7,128h217.2L341.6,417.9z"/><g><rect class="action-div" height="241" width="14" x="249" y="160"/><polygon class="action-div" points="320,160 305.4,160 294.7,401 309.3,401   "/><polygon class="action-div" points="206.5,160 192,160 202.7,401 217.3,401   "/></g></g></svg>
                                                            </span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endif %} -->
                                            {% for note in notes %}
                                            <div class="row mt-3">
                                                <div class="col-7">
                                                    <input type="text" name="" id="" class="note" value="{{ note.notes }}" readonly>
                                                </div>
                                                <div class="col-3 d-flex align-items-center">
                                                    <?xml version="1.0" ?><svg class="time" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:#101820;}</style></defs><title/><g data-name="Layer 15" id="Layer_15"><path class="cls-1" d="M16,31A15,15,0,1,1,31,16,15,15,0,0,1,16,31ZM16,3A13,13,0,1,0,29,16,13,13,0,0,0,16,3Z"/><path class="cls-1" d="M20.24,21.66l-4.95-4.95A1,1,0,0,1,15,16V8h2v7.59l4.66,4.65Z"/></g></svg>
                                                    <input type="text" class="note" value="{{ note.created_at|custom_timesince }}" readonly>
                                                </div>
                                                <div class="col-2">
                                                    <div>
                                                        <a href="/update_enquiry/{{ note.id }}">
                                                            <span class="edit">
                                                                <!-- SVG for edit icon -->
                                                                <?xml version="1.0" ?><svg class="edit-icon action-div" id="Outlined" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title/><g id="Fill"><path d="M29.12,6.05,26,2.88a3,3,0,0,0-4.24,0L6.29,18.29a3.06,3.06,0,0,0-.72,1.18L2.08,29.92l10.46-3.49a3.15,3.15,0,0,0,1.17-.72L29.12,10.29a3,3,0,0,0,0-4.24Zm-21,13.28,8.75-8.74,1.58,1.58L9.67,20.92ZM18.24,9.17l1.59-1.58,4.58,4.58-1.58,1.59ZM7.1,21.19l3.72,3.71L5.25,26.75Zm5.57,2.73-1.59-1.59,8.75-8.74,1.58,1.58Zm15-15-1.88,1.88L21.24,6.17l1.88-1.88A1,1,0,0,1,23.83,4a1,1,0,0,1,.71.29l3.17,3.18a1,1,0,0,1,.29.7A1,1,0,0,1,27.71,8.88Z"/></g></svg>
                                                            </span>
                                                        </a>
                                                        <a href="/delete_notes/{{ note.id }}">
                                                            <span class="delete">
                                                                <!-- SVG for delete icon -->
                                                                <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg class="delete-icon action-div" height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M400,113.3h-80v-20c0-16.2-13.1-29.3-29.3-29.3h-69.5C205.1,64,192,77.1,192,93.3v20h-80V128h21.1l23.6,290.7   c0,16.2,13.1,29.3,29.3,29.3h141c16.2,0,29.3-13.1,29.3-29.3L379.6,128H400V113.3z M206.6,93.3c0-8.1,6.6-14.7,14.6-14.7h69.5   c8.1,0,14.6,6.6,14.6,14.7v20h-98.7V93.3z M341.6,417.9l0,0.4v0.4c0,8.1-6.6,14.7-14.6,14.7H186c-8.1,0-14.6-6.6-14.6-14.7v-0.4   l0-0.4L147.7,128h217.2L341.6,417.9z"/><g><rect class="action-div" height="241" width="14" x="249" y="160"/><polygon class="action-div" points="320,160 305.4,160 294.7,401 309.3,401   "/><polygon class="action-div" points="206.5,160 192,160 202.7,401 217.3,401   "/></g></g></svg>
                                                            </span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>

                                        <!-- <div class="row d-flex justify-content-between">
                                            <div class="col-6 d-flex justify-content-md-end p-0 pe-4 pe-lg-4">
                                            </div>
                                            <div class="col-6 d-flex justify-content-lg-end ps-lg-4 p-0 ps-4 gap-5">
                                                <button class="btn login-btn nav-link active " id="notes-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Back</button>
                                                <input type="submit" value="submit" class="btn login-btn">
                                            </div>
                                        </div> -->

                                    </div>
                                </div>    
                            </div> 
                               
                        </div>
                        

                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- </div> -->

{% endblock %}


{% block scripts %}
<script>
    // tab functionality
    document.getElementById('next-tab').addEventListener('click', function () {
        event.preventDefault();
        var profileTab = new bootstrap.Tab(document.getElementById('profile-tab'));
        profileTab.show();
    });
    
    document.getElementById('student-tab').addEventListener('click', function () {
        event.preventDefault();
        var profileTab = new bootstrap.Tab(document.getElementById('notes-tab'));
        profileTab.show();
    });

    document.getElementById('notes-tab').addEventListener('click', function () {
        event.preventDefault();
        var profileTab = new bootstrap.Tab(document.getElementById('student-tab'));
        profileTab.show();
    });

    // dropdown functionality
    function toggleDropdown(element) {
        // Close all dropdowns
        const allDropdowns = document.querySelectorAll('.dropdown-menu');
        allDropdowns.forEach(dropdown => {
            if (dropdown !== element.nextElementSibling) {
                dropdown.classList.remove('show');
            }
        });

        // Close all arrows
        const allArrows = document.querySelectorAll('.right_arrow');
        allArrows.forEach(arrow => {
            if (arrow !== element.querySelector('.right_arrow')) {
                arrow.classList.remove('arrow_user');
            }
        });

        // Toggle the clicked dropdown and arrow
        const dropdownMenu = element.nextElementSibling;
        dropdownMenu.classList.toggle('show');
        const rightArrow = element.querySelector('.right_arrow');
        rightArrow.classList.toggle('arrow_user');
    }

    document.getElementById('toggle-sidenav').addEventListener('click', function () {
        const sidenav = document.getElementById('sidenav');
        sidenav.classList.toggle('collapsed');
    });
    
    // validation

    // Function to validate date format (dd/mm/yyyy)
    function validateDate(dateString) {
        var regex = /^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/;
        return regex.test(dateString);
    }

    document.getElementById('enquiry_form').addEventListener('submit', function(event) {
        console.log("form function trigred")
        event.preventDefault();
        let hasError = false;

        const today = new Date();
            
        // Get the entered date and today's date
        const enteredDate = new Date(document.getElementById('enquiry_date').value);

        const formattedToday = new Date(today.toISOString().split('T')[0]);

        // Date Validation
        var dateField = document.getElementById('enquiry_date');
        if (dateField.value.trim() === "") {
            document.getElementById('date_error').innerText = "Date Field is required.";
            hasError = true;
        } 
        // else if (enteredDate < formattedToday) {
        //     document.getElementById('date_error').innerText = "The date cannot be before today.";
        //     dateField.value = today.toISOString().split('T')[0];
        //     hasError = true;
        // }
        else {
            document.getElementById('date_error').innerText = "";
        }

        // Student Name Validation
        var studentName = document.getElementById('student_name');
        if (studentName.value.trim() === "") {
            document.getElementById('user_error').innerText = "Student Name Field is required.";
            hasError = true;
        } else {
            document.getElementById('user_error').innerText = "";
        }

        // Contact Number Validation
        var contactField = document.getElementById('contact');
        if (contactField.value.trim() === "") {
            document.getElementById('contact_error').innerText = "Contact Field is required.";
            hasError = true;
        }
        else if (contactField.value.length != 10 || isNaN(contactField.value)) {
            document.getElementById('contact_error').innerText = "Please enter a valid 10-digit contact number.";
            hasError = true;
        } else {
            document.getElementById('contact_error').innerText = "";
        }

        // Email Validation
        var emailField = document.getElementById('email');
        var emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        if (emailField.value.trim() === "") {
            document.getElementById('email_error').innerText = "Email Field is required.";
            hasError = true;
        }
        else if (!emailRegex.test(emailField.value)) {
            document.getElementById('email_error').innerText = "Please enter a valid email address.";
            hasError = true;
        } else {
            document.getElementById('email_error').innerText = "";
        }

        // Father's Contact Number Validation
        var fatherContactField = document.getElementById('father_contact');
        if (fatherContactField.value.trim() === "") {
            document.getElementById('father_contact_error').innerText = "Father contact Field is required.";
        }
        else if ( fatherContactField.value.length != 10 || isNaN(fatherContactField.value)) {
            document.getElementById('father_contact_error').innerText = "Please enter a valid 10-digit contact number.";
            hasError = true;
        } else {
            document.getElementById('father_contact_error').innerText = "";
        }

        // course name field validation
        var courseName = document.getElementById('courseName');
        if (courseName.value.trim() === "") {
            document.getElementById('course_name_error').innerText = "Please select your course.";
            hasError = true;
        } else {
            document.getElementById('course_name_error').innerText = "";
        }
        
        const enteredFollowUpDate = new Date(document.getElementById('next_follow_up_date').value);

        // Next follow-up field validation
        var Next_follow_up = document.getElementById('next_follow_up_date');
        if (Next_follow_up.value.trim() === "") {
            document.getElementById('next_follow_up_date_error').innerText = "Next follow-up Field is required.";
            hasError = true;
        } 
        // else if (enteredFollowUpDate < formattedToday) {
        //     document.getElementById('next_follow_up_date_error').innerText = "The date cannot be before today.";
        //     dateField.value = today.toISOString().split('T')[0];
        //     hasError = true;
        // } 
        else {
            document.getElementById('next_follow_up_date_error').innerText = "";
        }

        // Degree fields validation
        var degree = document.getElementById('degree');
        if (degree.value.trim() === "") {
            document.getElementById('degree_error').innerText = "Degree Field is required.";
            hasError = true;
        } else {
            document.getElementById('degree_error').innerText = "";
        }
        
        // college fields validation
        var college = document.getElementById('college');
        if (college.value.trim() === "") {
            document.getElementById('college_error').innerText = "College Field is required.";
            hasError = true;
        } else {
            document.getElementById('college_error').innerText = "";
        }
        
        // year_of_graduation fields validation
        var year_of_graduation = document.getElementById('year_of_graduation');
        if (year_of_graduation.value.trim() === "") {
            document.getElementById('year_of_graduation_error').innerText = "Year of Graduation Field is required.";
            hasError = true;
        } else {
            document.getElementById('year_of_graduation_error').innerText = "";
        }
        
        // Mode of Enquiry fields validation
        var mode_of_enquiry = document.getElementById('mode_of_enquiry');
        if (mode_of_enquiry.value.trim() === "") {
            document.getElementById('mode_of_enquiry_error').innerText = "Please Select Your Mode of Enquiry.";
            hasError = true;
        } else {
            document.getElementById('mode_of_enquiry_error').innerText = "";
        }
        
        // Lead Type fields validation
        var lead_type = document.getElementById('lead_type').value.trim();
        console.log("Lead Type : ", lead_type)
        if (lead_type === "") {
            document.getElementById('lead_type_error').innerText = "Please Select Your Lead Type.";
            hasError = true;
        } else {
            document.getElementById('lead_type_error').innerText = "";
        }

        if (mode_of_enquiry.value.trim() === "" || courseName.value.trim() === "" || lead_type === "") {
            document.getElementById('notes_error').innerText = "previous field's can't be empty.";
            hasError = true;
        } else {
            document.getElementById('notes_error').innerText = "";
        }



        console.log(hasError)

        if (!hasError) {
            document.getElementById("enquiry_form").submit();
            // Reload the page after a short delay (optional)
            setTimeout(function() {
                console.log("ding")
                window.location.href = "http://127.0.0.1:8000/enquiry/";
            }, 5000); // Adjust the delay as needed
        }
    });

    function permission(checkboxId) {
        // Get the checkbox
        console.log("permission function")
        var checkBox = document.getElementById(checkboxId);
        // Get the output text
        // var text = document.getElementById('text_' + checkboxId);

        // If the checkbox is checked, display the output text
        if (checkBox.checked) {
            checkBox.value = true;
        } else {
            checkBox.value = false;
        }
    }

    function showMessage() {
        const alertBox = document.getElementById('message');
        alertBox.style.display = 'block';

        setTimeout(() => {
            alertBox.style.display = 'none';
        }, 5000);
    }

    document.addEventListener('DOMContentLoaded', () => showMessage());


    function handleModeOfEnquiryChange() {
        // Get the select element and its selected value
        const modeOfEnquiryElement = document.getElementById('mode_of_enquiry');
        const selectedValue = modeOfEnquiryElement.value;
        const selectedText = modeOfEnquiryElement.options[modeOfEnquiryElement.selectedIndex].text.trim().toLowerCase();

        // Get the div elements by their IDs
        const referenceNameDiv = document.getElementById('reference_name_div');
        const referenceNameInput = document.getElementById('reference_name');
        const referenceContactDiv = document.getElementById('reference_contact_div');
        const referenceContactInput = document.getElementById('reference_contact');
        const otherEnquiryDetailsDiv = document.getElementById('other_enquiry_details_div');
        const otherEnquiryDetailsInput = document.getElementById('other_enquiry_details');

        // Hide all fields initially
        referenceNameDiv.style.display = 'none';
        referenceContactDiv.style.display = 'none';
        otherEnquiryDetailsDiv.style.display = 'none';

        // Show relevant fields based on selected mode of enquiry
        if (selectedText === 'reference') {
            referenceNameDiv.style.display = 'block';
            referenceContactDiv.style.display = 'block';

            validateField(referenceNameInput, 'reference_name_error');
            validateField(referenceContactInput, 'reference_contact_error');

        } else if (selectedText === 'other' || selectedText === 'others') {
            otherEnquiryDetailsDiv.style.display = 'block';

            validateField(otherEnquiryDetailsInput, 'other_enquiry_details_error');
        }
    }

    
    function handleCourseNameChange() {
        const courseNameElement = document.getElementById('courseName');
        const courseName = courseNameElement.options[courseNameElement.selectedIndex].text.trim().toLowerCase();

        const technologyDiv = document.getElementById('technology_div');
        const internshipDiv = document.getElementById('internship_technology_div');
        const daysDiv = document.getElementById('no_of_days_div');
        const studentsDiv = document.getElementById('no_of_students_div');
        const internshipDaysDiv = document.getElementById('internship_no_of_days_div');
        const internshipStudentsDiv = document.getElementById('internship_no_of_students_div');

        const technologyInput = document.getElementById('technology');
        const internshipInput = document.getElementById('internship_technology');
        const daysInput = document.getElementById('inplant_no_of_days');
        const studentsInput = document.getElementById('inplant_no_of_students');
        const internshipNoOfDaysInput = document.getElementById('internship_no_of_days');
        const internshipNoOfStudentsInput = document.getElementById('internship_no_of_students');

        clearErrors(); // Clear previous error messages

        // Hide all fields initially
        technologyDiv.style.display = 'none';
        internshipDiv.style.display = 'none';
        daysDiv.style.display = 'none';
        studentsDiv.style.display = 'none';
        internshipDaysDiv.style.display = 'none';
        internshipStudentsDiv.style.display = 'none';

        if (courseName === 'inplant training') {
            technologyDiv.style.display = 'block';
            daysDiv.style.display = 'block';
            studentsDiv.style.display = 'block';

            
            // Validate fields
            validateField(technologyInput, 'technology_error');
            validateField(daysInput, 'inplant_no_of_days_error');
            validateField(studentsInput, 'inplant_no_of_students_error');

        } else if (courseName === 'internship training') {
            internshipDiv.style.display = 'block';
            internshipDaysDiv.style.display = 'block';
            internshipStudentsDiv.style.display = 'block';

            // Validate fields
            validateField(internshipInput, 'internship_technology_error');
            validateField(internshipNoOfDaysInput, 'internship_no_of_days_error');
            validateField(internshipNoOfStudentsInput, 'internship_no_of_students_error');
        }
    }

    function validateField(inputElement, errorElementId) {
        const errorElement = document.getElementById(errorElementId);
        if (!inputElement || !errorElement) {
            return; // Ensure elements exist
        }

        if (inputElement.value.trim() === '') {
            // If the field is empty, display an error message
            errorElement.innerText = "This field can't be empty";
            errorElement.innerText = "";
            inputElement.required = true;
        } else {
            // If the field has a value, clear the error message
            errorElement.innerText = "";
            inputElement.required = false;
        }
    }

    function clearErrors() {
        const errorElements = document.querySelectorAll('.error-div');
        errorElements.forEach(element => {
            element.innerText = "";
        });
    }


    // Function to format the current date as YYYY-MM-DD
    function getCurrentDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
        const day = String(today.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    // // Function to format the current date as YYYY-MM-DD
    // function getCurrentDateplusOne() {
    //     const today = new Date();
    //     const year = today.getFullYear();
    //     const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
    //     const day = String(today.getDate() + 1).padStart(2, '0');
    //     return `${year}-${month}-${day}`;
    // }

    // // Set the default value of the date input field to the current date
    // document.addEventListener('DOMContentLoaded', (event) => {
    //     document.getElementById('dob').value = getCurrentDate();
    // });
    
    // // Set the default value of the date input field to the current date
    // document.addEventListener('DOMContentLoaded', (event) => {
    //     document.getElementById('enquiry_date').value = getCurrentDate();
    //     document.getElementById('enquiry_date').setAttribute('min', getCurrentDate());
    // });
    
    // // Set the default value of the date input field to the current date
    // document.addEventListener('DOMContentLoaded', (event) => {
    //     document.getElementById('next_follow_up_date').value = getCurrentDateplusOne();
    //     document.getElementById('next_follow_up_date').setAttribute('min', getCurrentDate())
    // });


    // function validateNotesForm() {
    //     const addressField = document.getElementById("address").value.trim();

    //     if (addressField === "") {
    //         alert("Please enter some notes before submitting.");
    //         return false;
    //     }

    //     // Add more validation if needed
    //     return true; // Return true if validation passes
    // }
</script>
{% endblock %}